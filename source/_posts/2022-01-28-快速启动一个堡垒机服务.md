---
layout: post
cid: 91
title: 快速启动一个堡垒机服务
slug: 91
date: 2022/01/28 16:44:00
updated: 2022/01/28 16:48:03
status: publish
author: sunday
categories: 
  - 运维
tags: 
customSummary: 
mathjax: auto
noThumbInfoStyle: default
outdatedNotice: no
reprint: standard
thumb: 
thumbChoice: default
thumbDesc: 
thumbSmall: 
thumbStyle: default
---

来看看吧 <!--more-->

## 安装DOCKER

```
yum -y install docker \
&& systemctl start docker \
&& systemctl enable docker
```
## 修改配置

```
# 系统配置
export JMS_VERSION='v2.18.0'
export JMS_SECRET_KEY='YoLTgaAeOaXPFRljOAPOr9Xh5H6RXhMakWMXjPAB9Jx8YRsbGx'
export JMS_BOOTSTRAP_TOKEN='YfwYqckamzswdMrL'
export JMS_ACCESS_PORT='8070'
# 存储数据库配置
export JMS_DB_HOST='mysql.xxx.cn'
export JMS_DB_PORT='3306'
export JMS_DB_USER='jms'
export JMS_DB_PASSWORD='xxx'
export JMS_DB_NAME='jms'
# 缓存数据库配置
export JMS_REDIS_HOST='redis.xxx.cn'
export JMS_REDIS_PORT='6379'
export JMS_REDIS_PASSWORD='xxx'
```

## 启动容器

```SHELL
docker rm -f jms_all
docker run --name jms_all -d \
   -v /data/jms/data:/opt/jumpserver/data \
   -p ${JMS_ACCESS_PORT}:80 \
   -p 2222:2222 \
   -e SECRET_KEY=${JMS_SECRET_KEY} \
   -e BOOTSTRAP_TOKEN=${JMS_BOOTSTRAP_TOKEN} \
   -e DB_HOST=${JMS_DB_HOST} \
   -e DB_PORT=${JMS_DB_PORT} \
   -e DB_USER=${JMS_DB_USER} \
   -e DB_PASSWORD=${JMS_DB_PASSWORD} \
   -e DB_NAME=${JMS_DB_NAME} \
   -e REDIS_HOST=${JMS_REDIS_HOST} \
   -e REDIS_PORT=${JMS_REDIS_PORT} \
   -e REDIS_PASSWORD=${JMS_REDIS_PASSWORD} \
   --privileged=true \
   jumpserver/jms_all:${JMS_VERSION}
docker logs -f --tail=200 jms_all
```