---
layout: post
title: 了解MacOS的内存使用
date: 2022/11/26 22:50:00
categories: 关于MAC
---

在使用Mac的时候，我一直是有个疑问，就是自带的活动监视器里面的内存总是和第三方安装的 `htop` 等命令行工具里面的内存使用量对不上。不知道以哪个为准。为此，特意去翻了翻官方的文档，了解了个大概。


<!--more-->


就比如以下通过活动监视器以及htop两种工具看到的不同内存使用情况：

活动监视器：

![活动监视器](https://oss.itan90.cn/out_pic/2022-07-31/stgpAQ.png)

命令行工具：

![命令行工具](https://oss.itan90.cn/out_pic/2022-07-31/hkPvnq.png)


通过以上两图，看出来这差别也太大了。。。不过现在可以理解他大概是一个假的内存详情了。 下面就有一个简单的方法判断内存是否够用。就是通过活动监视器来观察底下的内存内存压力图：

- 绿色内存压力：您的电脑正在有效使用其所有内存。

- 黄色内存压力：您的电脑可能最终需要更多内存。

- 红色内存压力：电脑需要更多内存。

是不是看上面的三段有点不好懂？通俗点就是说绿色就代表内存很足。如果内存压力呈现出来了黄色那么就是内存稍微有点不足，此时swap的使用量开始上升性能会稍微下降。到了红色峰值，就代表内存严重不足此时性能会有显著下降。就需要检查 App 是否占用了所有内存并导致内存压力增加。如果不再需要运行 App，那么就应该退出该 App。来释放掉部分内存维持均衡的运行。

